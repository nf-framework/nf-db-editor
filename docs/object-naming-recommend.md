## Используемые объекты
* **Таблица базы данных** – хранилище информации в базе данных.
* **Поле данных** – часть записи или заполняемой формы, имеющая функционально самостоятельное значение и обрабатываемая как отдельный элемент данных.
* **Представление** – сохраненный запрос.
* **Функция** – программный модуль, который выполняет одну или несколько инструкций и с помощью предложения RETURN возвращает одно значение. Функция также может принимать или возвращать несколько или ни одного значения через свой список параметров.
* **Триггеры** – программы, которые выполняются в ответ на изменение данных в таблице или на возникновение определенных событий в базе данных. 
* **Тип данных** – характеристика набора данных, которая определяет:
    * диапазон возможных значений данных из набора; 
    * допустимые операции, которые можно выполнять над этими значениями; 
    * способ хранения этих значений в памяти.
* **Комментарии** – фрагменты кода, служащие для документации программы или поясняющие ее работу.

## Идентификаторы – имена вышеперечисленных объектов.
* содержит только символы `[a-z0-9_]`, причём начинается с `[a-z]`. Обращаться по полному названию всегда `schema.object`
* должны иметь длину до 63 символов
* не являются зарезервированными словами, следуя [документации](https://www.postgresql.org/docs/current/sql-keywords-appendix.html) (там где reserved)
* учитывая эти правила можно писать имена объектов без использования кавычек, что предпочтительно
### Часто используемые части идентификаторов
* `type` тип
* `kind` вид
* `category` категория
* `reason` причина
* `state` статус, состояние
* `date` дата
* `datetime` дата и время
* `time` время
* `enum` перечень
* `list` список
## Принятые правила именования для таблиц базы данных и сопутствующих объектах базы данных

* таблица: `xxxxx` – осмысленное, отражающее назначение на сокращенном англ. языке.
В единственном числе, максимально компактное для уменьшения времени написания. Например: `param`.
Таблицы, являющиеся продолжением или расширением другой таблицы, именуются, добавляя к основной окончанием после “_”. Например: `param_value`.
Описание такой таблицы так же дополняет окончанием после “:” - “Параметры : Возможные значения”.
Таблицы-справочники, располагающиеся в схеме с основными таблицами рекомендуется начинать с префикса `ref_`
* поле таблицы: `zzzzz` – осмысленное, отражающее назначение поля на сокращенном англ. языке,
максимально компактное для уменьшения времени написания. 
Некоторые общепринятые наименования полей в системе
    * **id** *int8* - первичный суррогатный ключ
    * **pid** *int8* - поле ссылка на родительскую таблицу, тип данных такой же как и у первичного ключа родительской таблицы.
    Поля pid обычно задаются у сущностей, которые не могут существовать вовсе без родительской и являются, как правило,
    множественным набором какого-то свойства родительской, например, контактные данные физического лица
    * **hid** *int8* - поле иерархии
    * **code** *varchar,int2* - поле-краткий код или аббревиатура для термина в справочниках. В основном для использования в интеграциях при обмене данными, какого-то хардкода в плане задания констант или опций
    * **name, caption** *text* - человекочитаемое описание термина в справочниках
    * **description** *text* - полное описание термина в справочниках или сути записи в сущности
    * **note** *text* - поле для примечаний (дополнительных текстовых описаний)
    * **date_begin, date_end** *date* - период действия записи в днях (без указания времени)
    * **datetime_begin, datetime_end** *timestamp(tz)* - период действия записи при наличии времени
    * **time_begin, time_end** *time(tz)* - период в рамках одного дня
    * **created_at, updated_at, deleted_at** *timestamptz* - системные даты со временем операций над записями
    * **created_by, updated_by, deleted_by** *int8* - системные отметки о совершившем действии пользователе
    * **org, grp** *int8* - организация (nfc.org) и группа организаций (nfc.grp) в зависимости от деления информации в разделе
    * **user_id** *int8* - ссылка на пользователя системы (nfc.users) 
* представление: `v4xxxxx` – основное представление для раздела, в котором обязательно присутствуют все поля из таблицы
и разыменованные внешние ключи в виде *полеОсновнойТаблицы_полеИзВнешней*, например: *country_id_caption*.
`v4xxxxx8yyy`– дополнительные представления к разделу, где yyy назначение представления, например rep - для отчета по данному разделу
* триггеры: `tr4xxxxx8yyy` *yyy* – смысловая нагрузка. Часто используемые *yyy*:
  * *before* - изменение данных обрабатываемых записей таблице перед вставкой
  * *checks_before* - проверки данных вставляемой строки и строк родительских записей, что добавились или обновились ранее в транзакции
  * *after* - чаще всего вычисления для денормализующих полей родительских записей из обрабатываемых (например подсчет последней по датам записи дочерней, для отражения в основной)
  * *deferred_after* - выполнение действий над записью, когда нужна уверенность, что все зависящие записи тоже уже сохранились в бд. Например, отправить полный состав сохраненной записи с дочерними в журнал или очередь для интеграций.
  * *deferred_checks_after* - выполнение проверок из основной записи над дочерними. Например, проверить обязательность наполнения дочерней таблицы данными при определенных полях в основной.
* функции: `f4xxxxx8yyy` *yyy* – смысловая нагрузка выполняемого функцией действий
  * *add* - добавление,
  * *upd* - исправление
  * *del* - удаление
  * *checks* - проверки при добавлении, исправлении
  * *tr* - функция для триггеров *before* и *after*
  * *tr_checks* - для триггеров *checks_before* 
  * *tr_deferred* - для триггеров *deferred_after*
  * *tr_deferred_checks* - для триггеров *deferred_checks_after*
* параметры функций: `p_zzzzz` Обычно *zzzzz* это наименование поля таблицы
* локальные переменные функций: `v_zzzzz`. Префиксы p_ и v_ , чтобы отличались друг от друга и от полей таблиц,
  которыми чаще всего наполняются
* ключи таблицы: 
  * первичный (primary key) `pk4xxxxx`,
  * уникальный (unique key) `uk4xxxxx8yyy` *yyy* – назначение ключа, обычно название основного уникального поля в ключе. *yyy* может отсутствовать для главного уникального ключа в таблице.
  * внешний (foreign key) `fk4xxxxx8yyy` *yyy* – обычно наименования поля или его сокращенный вариант, которое ссылается на другую таблицу
* ограничения таблицы: `ch4xxxxx8yyy` *yyy* – смысловая нагрузка ограничения;
* индексы: `i4xxxxx8yyy` *yyy* - поле, если оно одно в индексе или смысловая нагрузка при составных

### Пример: раздел Параметры

* таблица: `core.param`
* подчиненная таблица: `core.param_value`
* справочник `core.ref_datatype`
* представление: `v4param`
* функция добавления: `f4param8add`
* триггер: `tr4param8ai`
* ключ: `uk4param8code`, `fk4param8dt`
* внешний ключ: `fk4param8datatype`
* ограничение: `ch4param8trimcode`
* индекс: `i4param8dt`.

